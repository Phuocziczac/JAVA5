<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{site/default/layout}">

<head>
	<title>Category List</title>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<!-- Bootstrap CSS v5.2.1 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
	<!-- FontAwesome 6.2.0 CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
		integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />

	<!-- (Optional) Use CSS or JS implementation -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/all.min.js"
		integrity="sha512-naukR7I+Nk6gp7p5TMA4ycgfxaZBJ7MO5iC3Fp6ySQyKFHOGfpkSZkYVWV5R7u7cfAicxanwYQ5D1e17EfJcMA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<style>
		.search-bar {
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.search-bar .form-control {
			max-width: 300px;
		}

		.search-bar .btn {
			margin-left: 10px;
		}

		footer {
			margin-left: 700px;
		}
	</style>
</head>

<body>
	<header>
		<!-- place navbar here -->
	</header>
	<main class="container mt-5" layout:fragment="content">
		<div class="card">
			<div class="card-header">
				<h5 class="card-title">Danh sách các danh mục</h5>
			</div>
			<div th:if="${message != null}" class="alert alert-primary" role="alert">
				<strong><i th:text="${message}"></i></strong>
			</div>
			<div class="row mt-2 mb-2">
				<div class="col">
					<div class="search-bar">
						<form th:action="@{/admin/categories/searchpaginated}" class="d-flex">
							<input type="text" class="form-control" name="name" id="name" placeholder="Name" />
							<button class="btn btn-outline-primary" type="submit">
								<i class="fas fa-search"></i> Search
							</button>
						</form>
						<a th:href="@{/admin/categories/add}" class="btn btn-outline-success"><i
								class="fas fa-plus"></i>
							ADD NEW CATEGORY</a>
					</div>
				</div>
			</div>
			<div class="row" th:unless="${categoryPage.hasContent()}">
				<div class="col">
					<div class="alert alert-danger" role="alert">
						<strong>No Categories Found</strong>
					</div>
				</div>
			</div>
			<div class="table-responsive">
				<table class="table table-striped table-inverse" th:if="${categoryPage.hasContent()}">
					<thead class="thead-inverse">
						<tr>
							<th scope="col">Mã danh mục</th>
							<th scope="col">Tên</th>
							<th scope="col">Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="category  : ${categoryPage.content}">
							<td scope="row" th:text="${category.categoryId}"></td>
							<td th:text="${category.name}"></td>
							<td><a th:href="@{'/admin/categories/view/' + ${category.categoryId}}"
									class="btn btn-outline-info"><i class="fas fa-info"></i></a> <a
									th:href="@{'/admin/categories/edit/' + ${category.categoryId}}"
									class="btn btn-outline-warning"><i class="fas fa-edit"></i></a>
								<a th:href="@{'/admin/categories/delete/' + ${category.categoryId}}"
									class="btn btn-outline-danger"><i class="fas fa-trash"></i></a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</main>
	<footer>
		<form action="">
			<div class="mb-3">
				<label for="size" class="form-label">Page Size :</label> <select name="size" id="size"
					class="form-control" onchange="this.form.submit()">
					<option th:selected="${categoryPage.size == 5}" value="5">5</option>
					<option th:selected="${categoryPage.size == 10}" value="10">10</option>
					<option th:selected="${categoryPage.size == 15}" value="15">15</option>
					<option th:selected="${categoryPage.size == 20}" value="20">20</option>
					<option th:selected="${categoryPage.size == 30}" value="30">30</option>
				</select>

			</div>

		</form>
		<nav aria-label="Page navigation" th:if="${categoryPage.totalPages > 0}">
			<ul class="pagination">
				<li th:class="${categoryPage.first} ? 'page-item disabled' : 'page-item'">
					<a th:href="@{/admin/categories/searchpaginated(name=${name},size=${categoryPage.size},page=0)}"
						class="page-link">First</a>
				</li>
				<li th:class="${categoryPage.number == i} ? 'page-item active' : 'page-item'"
					th:each="i : ${#numbers.sequence(1, categoryPage.totalPages)}">
					<a th:href="@{/admin/categories/searchpaginated(name=${name},size=${categoryPage.size},page=${i - 1})}"
						class="page-link" th:text="${i}"></a>
				</li>


				<li th:class="${categoryPage.last} ? 'page-item disabled' : 'page-item'">
					<a th:href="@{/admin/categories/searchpaginated(name=${name},size=${categoryPage.size},page=${categoryPage.totalPages - 1})}"
						class="page-link">Last</a>
				</li>
			</ul>
		</nav>
	</footer>
	<p></p>
	<!-- Bootstrap JavaScript Libraries -->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
		integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
		crossorigin="anonymous"></script>
</body>

</html>